!function(t){"use strict";var e=function(e){this.element=t(e)};e.prototype={constructor:e,show:function(){var e,n,i,r=this.element,o=r.closest("ul:not(.dropdown-menu)"),a=r.attr("data-target");a||(a=r.attr("href"),a=a&&a.replace(/.*(?=#[^\s]*$)/,"")),r.parent("li").hasClass("active")||(e=o.find(".active:last a")[0],i=t.Event("show",{relatedTarget:e}),r.trigger(i),i.isDefaultPrevented()||(n=t(a),this.activate(r.parent("li"),o),this.activate(n,n.parent(),function(){r.trigger({type:"shown",relatedTarget:e})})))},activate:function(e,n,i){function r(){o.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),e.addClass("active"),a?(e[0].offsetWidth,e.addClass("in")):e.removeClass("fade"),e.parent(".dropdown-menu")&&e.closest("li.dropdown").addClass("active"),i&&i()}var o=n.find("> .active"),a=i&&t.support.transition&&o.hasClass("fade");a?o.one(t.support.transition.end,r):r(),o.removeClass("in")}};var n=t.fn.tab;t.fn.tab=function(n){return this.each(function(){var i=t(this),r=i.data("tab");r||i.data("tab",r=new e(this)),"string"==typeof n&&r[n]()})},t.fn.tab.Constructor=e,t.fn.tab.noConflict=function(){return t.fn.tab=n,this},t(document).on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(e){e.preventDefault(),t(this).tab("show")})}(window.jQuery),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(t,e){var n=0,i=Array.prototype.slice,r=t.cleanData;t.cleanData=function(e){for(var n,i=0;null!=(n=e[i]);i++)try{t(n).triggerHandler("remove")}catch(o){}r(e)},t.widget=function(e,n,i){var r,o,a,s,u={},l=e.split(".")[0];e=e.split(".")[1],r=l+"-"+e,i||(i=n,n=t.Widget),t.expr[":"][r.toLowerCase()]=function(e){return!!t.data(e,r)},t[l]=t[l]||{},o=t[l][e],a=t[l][e]=function(t,e){return this._createWidget?void(arguments.length&&this._createWidget(t,e)):new a(t,e)},t.extend(a,o,{version:i.version,_proto:t.extend({},i),_childConstructors:[]}),s=new n,s.options=t.widget.extend({},s.options),t.each(i,function(e,i){return t.isFunction(i)?void(u[e]=function(){var t=function(){return n.prototype[e].apply(this,arguments)},r=function(t){return n.prototype[e].apply(this,t)};return function(){var e,n=this._super,o=this._superApply;return this._super=t,this._superApply=r,e=i.apply(this,arguments),this._super=n,this._superApply=o,e}}()):void(u[e]=i)}),a.prototype=t.widget.extend(s,{widgetEventPrefix:o?s.widgetEventPrefix:e},u,{constructor:a,namespace:l,widgetName:e,widgetFullName:r}),o?(t.each(o._childConstructors,function(e,n){var i=n.prototype;t.widget(i.namespace+"."+i.widgetName,a,n._proto)}),delete o._childConstructors):n._childConstructors.push(a),t.widget.bridge(e,a)},t.widget.extend=function(n){for(var r,o,a=i.call(arguments,1),s=0,u=a.length;u>s;s++)for(r in a[s])o=a[s][r],a[s].hasOwnProperty(r)&&o!==e&&(n[r]=t.isPlainObject(o)?t.isPlainObject(n[r])?t.widget.extend({},n[r],o):t.widget.extend({},o):o);return n},t.widget.bridge=function(n,r){var o=r.prototype.widgetFullName||n;t.fn[n]=function(a){var s="string"==typeof a,u=i.call(arguments,1),l=this;return a=!s&&u.length?t.widget.extend.apply(null,[a].concat(u)):a,this.each(s?function(){var i,r=t.data(this,o);return r?t.isFunction(r[a])&&"_"!==a.charAt(0)?(i=r[a].apply(r,u),i!==r&&i!==e?(l=i&&i.jquery?l.pushStack(i.get()):i,!1):void 0):t.error("no such method '"+a+"' for "+n+" widget instance"):t.error("cannot call methods on "+n+" prior to initialization; attempted to call method '"+a+"'")}:function(){var e=t.data(this,o);e?e.option(a||{})._init():t.data(this,o,new r(a,this))}),l}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(e,i){i=t(i||this.defaultElement||this)[0],this.element=t(i),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=t.widget.extend({},this.options,this._getCreateOptions(),e),this.bindings=t(),this.hoverable=t(),this.focusable=t(),i!==this&&(t.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===i&&this.destroy()}}),this.document=t(i.style?i.ownerDocument:i.document||i),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:t.noop,_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(t.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:t.noop,widget:function(){return this.element},option:function(n,i){var r,o,a,s=n;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof n)if(s={},r=n.split("."),n=r.shift(),r.length){for(o=s[n]=t.widget.extend({},this.options[n]),a=0;a<r.length-1;a++)o[r[a]]=o[r[a]]||{},o=o[r[a]];if(n=r.pop(),i===e)return o[n]===e?null:o[n];o[n]=i}else{if(i===e)return this.options[n]===e?null:this.options[n];s[n]=i}return this._setOptions(s),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return this.options[t]=e,"disabled"===t&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!e).attr("aria-disabled",e),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(e,n,i){var r,o=this;"boolean"!=typeof e&&(i=n,n=e,e=!1),i?(n=r=t(n),this.bindings=this.bindings.add(n)):(i=n,n=this.element,r=this.widget()),t.each(i,function(i,a){function s(){return e||o.options.disabled!==!0&&!t(this).hasClass("ui-state-disabled")?("string"==typeof a?o[a]:a).apply(o,arguments):void 0}"string"!=typeof a&&(s.guid=a.guid=a.guid||s.guid||t.guid++);var u=i.match(/^(\w+)\s*(.*)$/),l=u[1]+o.eventNamespace,c=u[2];c?r.delegate(c,l,s):n.bind(l,s)})},_off:function(t,e){e=(e||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(e).undelegate(e)},_delay:function(t,e){function n(){return("string"==typeof t?i[t]:t).apply(i,arguments)}var i=this;return setTimeout(n,e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){t(e.currentTarget).addClass("ui-state-hover")},mouseleave:function(e){t(e.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){t(e.currentTarget).addClass("ui-state-focus")},focusout:function(e){t(e.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(e,n,i){var r,o,a=this.options[e];if(i=i||{},n=t.Event(n),n.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),n.target=this.element[0],o=n.originalEvent)for(r in o)r in n||(n[r]=o[r]);return this.element.trigger(n,i),!(t.isFunction(a)&&a.apply(this.element[0],[n].concat(i))===!1||n.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},function(e,n){t.Widget.prototype["_"+e]=function(i,r,o){"string"==typeof r&&(r={effect:r});var a,s=r?r===!0||"number"==typeof r?n:r.effect||n:e;r=r||{},"number"==typeof r&&(r={duration:r}),a=!t.isEmptyObject(r),r.complete=o,r.delay&&i.delay(r.delay),a&&t.effects&&t.effects.effect[s]?i[e](r):s!==e&&i[s]?i[s](r.duration,r.easing,o):i.queue(function(n){t(this)[e](),o&&o.call(i[0]),n()})}})}),function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery","jquery.ui.widget"],t):t(window.jQuery)}(function(t){"use strict";t.support.xhrFileUpload=!(!window.XMLHttpRequestUpload||!window.FileReader),t.support.xhrFormDataFileUpload=!!window.FormData,t.widget("blueimp.fileupload",{options:{dropZone:t(document),pasteZone:t(document),fileInput:void 0,replaceFileInput:!0,paramName:void 0,singleFileUploads:!0,limitMultiFileUploads:void 0,sequentialUploads:!1,limitConcurrentUploads:void 0,forceIframeTransport:!1,redirect:void 0,redirectParamName:void 0,postMessage:void 0,multipart:!0,maxChunkSize:void 0,uploadedBytes:void 0,recalculateProgress:!0,progressInterval:100,bitrateInterval:500,autoUpload:!0,formData:function(t){return t.serializeArray()},add:function(e,n){(n.autoUpload||n.autoUpload!==!1&&(t(this).data("blueimp-fileupload")||t(this).data("fileupload")).options.autoUpload)&&n.submit()},processData:!1,contentType:!1,cache:!1},_refreshOptionsList:["fileInput","dropZone","pasteZone","multipart","forceIframeTransport"],_BitrateTimer:function(){this.timestamp=Date.now?Date.now():(new Date).getTime(),this.loaded=0,this.bitrate=0,this.getBitrate=function(t,e,n){var i=t-this.timestamp;return(!this.bitrate||!n||i>n)&&(this.bitrate=(e-this.loaded)*(1e3/i)*8,this.loaded=e,this.timestamp=t),this.bitrate}},_isXHRUpload:function(e){return!e.forceIframeTransport&&(!e.multipart&&t.support.xhrFileUpload||t.support.xhrFormDataFileUpload)},_getFormData:function(e){var n;return"function"==typeof e.formData?e.formData(e.form):t.isArray(e.formData)?e.formData:"object"===t.type(e.formData)?(n=[],t.each(e.formData,function(t,e){n.push({name:t,value:e})}),n):[]},_getTotal:function(e){var n=0;return t.each(e,function(t,e){n+=e.size||1}),n},_initProgressObject:function(e){var n={loaded:0,total:0,bitrate:0};e._progress?t.extend(e._progress,n):e._progress=n},_initResponseObject:function(t){var e;if(t._response)for(e in t._response)t._response.hasOwnProperty(e)&&delete t._response[e];else t._response={}},_onProgress:function(t,e){if(t.lengthComputable){var n,i=Date.now?Date.now():(new Date).getTime();if(e._time&&e.progressInterval&&i-e._time<e.progressInterval&&t.loaded!==t.total)return;e._time=i,n=Math.floor(t.loaded/t.total*(e.chunkSize||e._progress.total))+(e.uploadedBytes||0),this._progress.loaded+=n-e._progress.loaded,this._progress.bitrate=this._bitrateTimer.getBitrate(i,this._progress.loaded,e.bitrateInterval),e._progress.loaded=e.loaded=n,e._progress.bitrate=e.bitrate=e._bitrateTimer.getBitrate(i,n,e.bitrateInterval),this._trigger("progress",t,e),this._trigger("progressall",t,this._progress)}},_initProgressListener:function(e){var n=this,i=e.xhr?e.xhr():t.ajaxSettings.xhr();i.upload&&(t(i.upload).bind("progress",function(t){var i=t.originalEvent;t.lengthComputable=i.lengthComputable,t.loaded=i.loaded,t.total=i.total,n._onProgress(t,e)}),e.xhr=function(){return i})},_isInstanceOf:function(t,e){return Object.prototype.toString.call(e)==="[object "+t+"]"},_initXHRData:function(e){var n,i=this,r=e.files[0],o=e.multipart||!t.support.xhrFileUpload,a=e.paramName[0];e.headers=e.headers||{},e.contentRange&&(e.headers["Content-Range"]=e.contentRange),o?t.support.xhrFormDataFileUpload&&(e.postMessage?(n=this._getFormData(e),e.blob?n.push({name:a,value:e.blob}):t.each(e.files,function(t,i){n.push({name:e.paramName[t]||a,value:i})})):(i._isInstanceOf("FormData",e.formData)?n=e.formData:(n=new FormData,t.each(this._getFormData(e),function(t,e){n.append(e.name,e.value)})),e.blob?(e.headers["Content-Disposition"]='attachment; filename="'+encodeURI(r.name)+'"',n.append(a,e.blob,r.name)):t.each(e.files,function(t,r){(i._isInstanceOf("File",r)||i._isInstanceOf("Blob",r))&&n.append(e.paramName[t]||a,r,r.name)})),e.data=n):(e.headers["Content-Disposition"]='attachment; filename="'+encodeURI(r.name)+'"',e.contentType=r.type,e.data=e.blob||r),e.blob=null},_initIframeSettings:function(e){e.dataType="iframe "+(e.dataType||""),e.formData=this._getFormData(e),e.redirect&&t("<a></a>").prop("href",e.url).prop("host")!==location.host&&e.formData.push({name:e.redirectParamName||"redirect",value:e.redirect})},_initDataSettings:function(t){this._isXHRUpload(t)?(this._chunkedUpload(t,!0)||(t.data||this._initXHRData(t),this._initProgressListener(t)),t.postMessage&&(t.dataType="postmessage "+(t.dataType||""))):this._initIframeSettings(t)},_getParamName:function(e){var n=t(e.fileInput),i=e.paramName;return i?t.isArray(i)||(i=[i]):(i=[],n.each(function(){for(var e=t(this),n=e.prop("name")||"files[]",r=(e.prop("files")||[1]).length;r;)i.push(n),r-=1}),i.length||(i=[n.prop("name")||"files[]"])),i},_initFormSettings:function(e){e.form&&e.form.length||(e.form=t(e.fileInput.prop("form")),e.form.length||(e.form=t(this.options.fileInput.prop("form")))),e.paramName=this._getParamName(e),e.url||(e.url=e.form.prop("action")||location.href),e.type=(e.type||e.form.prop("method")||"").toUpperCase(),"POST"!==e.type&&"PUT"!==e.type&&"PATCH"!==e.type&&(e.type="POST"),e.formAcceptCharset||(e.formAcceptCharset=e.form.attr("accept-charset"))},_getAJAXSettings:function(e){var n=t.extend({},this.options,e);return this._initFormSettings(n),this._initDataSettings(n),n},_getDeferredState:function(t){return t.state?t.state():t.isResolved()?"resolved":t.isRejected()?"rejected":"pending"},_enhancePromise:function(t){return t.success=t.done,t.error=t.fail,t.complete=t.always,t},_getXHRPromise:function(e,n,i){var r=t.Deferred(),o=r.promise();return n=n||this.options.context||o,e===!0?r.resolveWith(n,i):e===!1&&r.rejectWith(n,i),o.abort=r.promise,this._enhancePromise(o)},_addConvenienceMethods:function(t,e){var n=this;e.submit=function(){return"pending"!==this.state()&&(e.jqXHR=this.jqXHR=n._trigger("submit",t,this)!==!1&&n._onSend(t,this)),this.jqXHR||n._getXHRPromise()},e.abort=function(){return this.jqXHR?this.jqXHR.abort():n._getXHRPromise()},e.state=function(){return this.jqXHR?n._getDeferredState(this.jqXHR):void 0},e.progress=function(){return this._progress},e.response=function(){return this._response}},_getUploadedBytes:function(t){var e=t.getResponseHeader("Range"),n=e&&e.split("-"),i=n&&n.length>1&&parseInt(n[1],10);return i&&i+1},_chunkedUpload:function(e,n){var i,r,o=this,a=e.files[0],s=a.size,u=e.uploadedBytes=e.uploadedBytes||0,l=e.maxChunkSize||s,c=a.slice||a.webkitSlice||a.mozSlice,d=t.Deferred(),p=d.promise();return this._isXHRUpload(e)&&c&&(u||s>l)&&!e.data?n?!0:u>=s?(a.error="Uploaded bytes exceed file size",this._getXHRPromise(!1,e.context,[null,"error",a.error])):(r=function(){var n=t.extend({},e),p=n._progress.loaded;n.blob=c.call(a,u,u+l,a.type),n.chunkSize=n.blob.size,n.contentRange="bytes "+u+"-"+(u+n.chunkSize-1)+"/"+s,o._initXHRData(n),o._initProgressListener(n),i=(o._trigger("chunksend",null,n)!==!1&&t.ajax(n)||o._getXHRPromise(!1,n.context)).done(function(i,a,l){u=o._getUploadedBytes(l)||u+n.chunkSize,n._progress.loaded===p&&o._onProgress(t.Event("progress",{lengthComputable:!0,loaded:u-n.uploadedBytes,total:u-n.uploadedBytes}),n),e.uploadedBytes=n.uploadedBytes=u,n.result=i,n.textStatus=a,n.jqXHR=l,o._trigger("chunkdone",null,n),o._trigger("chunkalways",null,n),s>u?r():d.resolveWith(n.context,[i,a,l])}).fail(function(t,e,i){n.jqXHR=t,n.textStatus=e,n.errorThrown=i,o._trigger("chunkfail",null,n),o._trigger("chunkalways",null,n),d.rejectWith(n.context,[t,e,i])})},this._enhancePromise(p),p.abort=function(){return i.abort()},r(),p):!1},_beforeSend:function(t,e){0===this._active&&(this._trigger("start"),this._bitrateTimer=new this._BitrateTimer,this._progress.loaded=this._progress.total=0,this._progress.bitrate=0),this._initResponseObject(e),this._initProgressObject(e),e._progress.loaded=e.loaded=e.uploadedBytes||0,e._progress.total=e.total=this._getTotal(e.files)||1,e._progress.bitrate=e.bitrate=0,this._active+=1,this._progress.loaded+=e.loaded,this._progress.total+=e.total},_onDone:function(e,n,i,r){var o=r._progress.total,a=r._response;r._progress.loaded<o&&this._onProgress(t.Event("progress",{lengthComputable:!0,loaded:o,total:o}),r),a.result=r.result=e,a.textStatus=r.textStatus=n,a.jqXHR=r.jqXHR=i,this._trigger("done",null,r)},_onFail:function(t,e,n,i){var r=i._response;i.recalculateProgress&&(this._progress.loaded-=i._progress.loaded,this._progress.total-=i._progress.total),r.jqXHR=i.jqXHR=t,r.textStatus=i.textStatus=e,r.errorThrown=i.errorThrown=n,this._trigger("fail",null,i)},_onAlways:function(t,e,n,i){this._trigger("always",null,i)},_onSend:function(e,n){n.submit||this._addConvenienceMethods(e,n);var i,r,o,a,s=this,u=s._getAJAXSettings(n),l=function(){return s._sending+=1,u._bitrateTimer=new s._BitrateTimer,i=i||((r||s._trigger("send",e,u)===!1)&&s._getXHRPromise(!1,u.context,r)||s._chunkedUpload(u)||t.ajax(u)).done(function(t,e,n){s._onDone(t,e,n,u)}).fail(function(t,e,n){s._onFail(t,e,n,u)}).always(function(t,e,n){if(s._onAlways(t,e,n,u),s._sending-=1,s._active-=1,u.limitConcurrentUploads&&u.limitConcurrentUploads>s._sending)for(var i=s._slots.shift();i;){if("pending"===s._getDeferredState(i)){i.resolve();break}i=s._slots.shift()}0===s._active&&s._trigger("stop")})};return this._beforeSend(e,u),this.options.sequentialUploads||this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending?(this.options.limitConcurrentUploads>1?(o=t.Deferred(),this._slots.push(o),a=o.pipe(l)):a=this._sequence=this._sequence.pipe(l,l),a.abort=function(){return r=[void 0,"abort","abort"],i?i.abort():(o&&o.rejectWith(u.context,r),l())},this._enhancePromise(a)):l()},_onAdd:function(e,n){var i,r,o,a,s=this,u=!0,l=t.extend({},this.options,n),c=l.limitMultiFileUploads,d=this._getParamName(l);if((l.singleFileUploads||c)&&this._isXHRUpload(l))if(!l.singleFileUploads&&c)for(o=[],i=[],a=0;a<n.files.length;a+=c)o.push(n.files.slice(a,a+c)),r=d.slice(a,a+c),r.length||(r=d),i.push(r);else i=d;else o=[n.files],i=[d];return n.originalFiles=n.files,t.each(o||n.files,function(r,a){var l=t.extend({},n);return l.files=o?a:[a],l.paramName=i[r],s._initResponseObject(l),s._initProgressObject(l),s._addConvenienceMethods(e,l),u=s._trigger("add",e,l)}),u},_replaceFileInput:function(e){var n=e.clone(!0);t("<form></form>").append(n)[0].reset(),e.after(n).detach(),t.cleanData(e.unbind("remove")),this.options.fileInput=this.options.fileInput.map(function(t,i){return i===e[0]?n[0]:i}),e[0]===this.element[0]&&(this.element=n)},_handleFileTreeEntry:function(e,n){var i,r=this,o=t.Deferred(),a=function(t){t&&!t.entry&&(t.entry=e),o.resolve([t])};return n=n||"",e.isFile?e._file?(e._file.relativePath=n,o.resolve(e._file)):e.file(function(t){t.relativePath=n,o.resolve(t)},a):e.isDirectory?(i=e.createReader(),i.readEntries(function(t){r._handleFileTreeEntries(t,n+e.name+"/").done(function(t){o.resolve(t)}).fail(a)},a)):o.resolve([]),o.promise()},_handleFileTreeEntries:function(e,n){var i=this;return t.when.apply(t,t.map(e,function(t){return i._handleFileTreeEntry(t,n)})).pipe(function(){return Array.prototype.concat.apply([],arguments)})},_getDroppedFiles:function(e){e=e||{};var n=e.items;return n&&n.length&&(n[0].webkitGetAsEntry||n[0].getAsEntry)?this._handleFileTreeEntries(t.map(n,function(t){var e;return t.webkitGetAsEntry?(e=t.webkitGetAsEntry(),e&&(e._file=t.getAsFile()),e):t.getAsEntry()})):t.Deferred().resolve(t.makeArray(e.files)).promise()},_getSingleFileInputFiles:function(e){e=t(e);var n,i,r=e.prop("webkitEntries")||e.prop("entries");if(r&&r.length)return this._handleFileTreeEntries(r);if(n=t.makeArray(e.prop("files")),n.length)void 0===n[0].name&&n[0].fileName&&t.each(n,function(t,e){e.name=e.fileName,e.size=e.fileSize});else{if(i=e.prop("value"),!i)return t.Deferred().resolve([]).promise();n=[{name:i.replace(/^.*\\/,"")}]}return t.Deferred().resolve(n).promise()},_getFileInputFiles:function(e){return e instanceof t&&1!==e.length?t.when.apply(t,t.map(e,this._getSingleFileInputFiles)).pipe(function(){return Array.prototype.concat.apply([],arguments)}):this._getSingleFileInputFiles(e)},_onChange:function(e){var n=this,i={fileInput:t(e.target),form:t(e.target.form)};this._getFileInputFiles(i.fileInput).always(function(t){i.files=t,n.options.replaceFileInput&&n._replaceFileInput(i.fileInput),n._trigger("change",e,i)!==!1&&n._onAdd(e,i)})},_onPaste:function(e){var n=e.originalEvent&&e.originalEvent.clipboardData&&e.originalEvent.clipboardData.items,i={files:[]};return n&&n.length&&(t.each(n,function(t,e){var n=e.getAsFile&&e.getAsFile();n&&i.files.push(n)}),this._trigger("paste",e,i)===!1||this._onAdd(e,i)===!1)?!1:void 0},_onDrop:function(t){var e=this,n=t.dataTransfer=t.originalEvent&&t.originalEvent.dataTransfer,i={};n&&n.files&&n.files.length&&(t.preventDefault(),this._getDroppedFiles(n).always(function(n){i.files=n,e._trigger("drop",t,i)!==!1&&e._onAdd(t,i)}))},_onDragOver:function(e){var n=e.dataTransfer=e.originalEvent&&e.originalEvent.dataTransfer;if(n){if(this._trigger("dragover",e)===!1)return!1;-1!==t.inArray("Files",n.types)&&(n.dropEffect="copy",e.preventDefault())}},_initEventHandlers:function(){this._isXHRUpload(this.options)&&(this._on(this.options.dropZone,{dragover:this._onDragOver,drop:this._onDrop}),this._on(this.options.pasteZone,{paste:this._onPaste})),this._on(this.options.fileInput,{change:this._onChange})},_destroyEventHandlers:function(){this._off(this.options.dropZone,"dragover drop"),this._off(this.options.pasteZone,"paste"),this._off(this.options.fileInput,"change")},_setOption:function(e,n){var i=-1!==t.inArray(e,this._refreshOptionsList);i&&this._destroyEventHandlers(),this._super(e,n),i&&(this._initSpecialOptions(),this._initEventHandlers())},_initSpecialOptions:function(){var e=this.options;void 0===e.fileInput?e.fileInput=this.element.is('input[type="file"]')?this.element:this.element.find('input[type="file"]'):e.fileInput instanceof t||(e.fileInput=t(e.fileInput)),e.dropZone instanceof t||(e.dropZone=t(e.dropZone)),e.pasteZone instanceof t||(e.pasteZone=t(e.pasteZone))},_create:function(){var e=this.options;t.extend(e,t(this.element[0].cloneNode(!1)).data()),this._initSpecialOptions(),this._slots=[],this._sequence=this._getXHRPromise(!0),this._sending=this._active=0,this._initProgressObject(this),this._initEventHandlers()},active:function(){return this._active},progress:function(){return this._progress},add:function(e){var n=this;e&&!this.options.disabled&&(e.fileInput&&!e.files?this._getFileInputFiles(e.fileInput).always(function(t){e.files=t,n._onAdd(null,e)}):(e.files=t.makeArray(e.files),this._onAdd(null,e)))},send:function(e){if(e&&!this.options.disabled){if(e.fileInput&&!e.files){var n,i,r=this,o=t.Deferred(),a=o.promise();return a.abort=function(){return i=!0,n?n.abort():(o.reject(null,"abort","abort"),a)},this._getFileInputFiles(e.fileInput).always(function(t){i||(e.files=t,n=r._onSend(null,e).then(function(t,e,n){o.resolve(t,e,n)},function(t,e,n){o.reject(t,e,n)}))}),this._enhancePromise(a)}if(e.files=t.makeArray(e.files),e.files.length)return this._onSend(null,e)}return this._getXHRPromise(!1,e&&e.context)}})}),function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],t):t(window.jQuery)}(function(t){"use strict";var e=0;t.ajaxTransport("iframe",function(n){if(n.async){var i,r,o;return{send:function(a,s){i=t('<form style="display:none;"></form>'),i.attr("accept-charset",n.formAcceptCharset),o=/\?/.test(n.url)?"&":"?","DELETE"===n.type?(n.url=n.url+o+"_method=DELETE",n.type="POST"):"PUT"===n.type?(n.url=n.url+o+"_method=PUT",n.type="POST"):"PATCH"===n.type&&(n.url=n.url+o+"_method=PATCH",n.type="POST"),r=t('<iframe src="javascript:false;" name="iframe-transport-'+(e+=1)+'"></iframe>').bind("load",function(){var e,o=t.isArray(n.paramName)?n.paramName:[n.paramName];r.unbind("load").bind("load",function(){var e;try{if(e=r.contents(),!e.length||!e[0].firstChild)throw new Error}catch(n){e=void 0}s(200,"success",{iframe:e}),t('<iframe src="javascript:false;"></iframe>').appendTo(i),i.remove()}),i.prop("target",r.prop("name")).prop("action",n.url).prop("method",n.type),n.formData&&t.each(n.formData,function(e,n){t('<input type="hidden"/>').prop("name",n.name).val(n.value).appendTo(i)}),n.fileInput&&n.fileInput.length&&"POST"===n.type&&(e=n.fileInput.clone(),n.fileInput.after(function(t){return e[t]}),n.paramName&&n.fileInput.each(function(e){t(this).prop("name",o[e]||n.paramName)}),i.append(n.fileInput).prop("enctype","multipart/form-data").prop("encoding","multipart/form-data")),i.submit(),e&&e.length&&n.fileInput.each(function(n,i){var r=t(e[n]);t(i).prop("name",r.prop("name")),r.replaceWith(i)})}),i.append(r).appendTo(document.body)},abort:function(){r&&r.unbind("load").prop("src","javascript".concat(":false;")),i&&i.remove()}}}}),t.ajaxSetup({converters:{"iframe text":function(e){return e&&t(e[0].body).text()},"iframe json":function(e){return e&&t.parseJSON(t(e[0].body).text())},"iframe html":function(e){return e&&t(e[0].body).html()},"iframe script":function(e){return e&&t.globalEval(t(e[0].body).text())}}})}),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;Maleskine.UserSettings=function(n){function i(){this.openSmsBindModal=t(this.openSmsBindModal,this),this.refreshCaptcha=t(this.refreshCaptcha,this),this.submitResetPassword=t(this.submitResetPassword,this);var e;i.__super__.constructor.apply(this,arguments),$("#selectall").on("ifChecked",function(){return function(t){return $(t.currentTarget).closest("table").find("tbody").find(":checkbox:enabled").iCheck("check")}}(this)),$("#selectall").on("ifUnchecked",function(){return function(t){return $(t.currentTarget).closest("table").find("tbody").find(":checkbox:enabled").iCheck("uncheck")}}(this)),this.tab.find("a[href="+window.location.hash+"]").tab("show"),"#destroy"===(e=this.tab.find("li.active a").attr("href"))||"#blacklist"===e?this.submitButton.hide():this.submitButton.show(),"#reward"===this.tab.find("li.active a").attr("href")&&(0===this.$("#user_reward_setting_default_amount").length?this.submitButton.hide():this.submitButton.show()),"#pass"===this.tab.find("li.active a").attr("href")&&$(".captcha_fields").length>0&&this.refreshCaptcha(),this.tab.find('a[data-toggle="tab"]').on("shown",function(t){return function(e){var n;return"#pass"===$(e.target).attr("href")&&$(".captcha_fields").length>0&&t.refreshCaptcha(),"#destroy"===(n=$(e.target).attr("href"))||"#blacklist"===n?t.submitButton.hide():t.submitButton.show(),"#reward"===$(e.target).attr("href")?0===t.$("#user_reward_setting_default_amount").length?t.submitButton.hide():t.submitButton.show():void 0}}(this)),this.submitButton.click(function(){return function(){return $(".tab-pane.active form").trigger("submit.rails")}}(this)),this.passwordInputs.on("keypress",function(t){return function(e){return 13===e.which?t.$("#pass form").submit():void 0}}(this)),this.removeSNSLinks.on("ajax:beforeSend",function(t){return function(){return t.snsLoader.show()}}(this)),this.forms.on("ajax:beforeSend",function(t){return function(){return Ladda.create(t.submitButton[0]).start()}}(this)),this.forms.on("ajax:complete",function(t){return function(){return Ladda.create(t.submitButton[0]).stop()}}(this)),this.forms.on("ajax:success",function(t){return function(e,n){return null!=n.message&&n.message.length>0&&t.notyInfo(n.message),n.refresh&&setTimeout(function(){return window.location.reload()},1200),$("#pass.active form").length>0?$("#pass.active form").find("input[type=password]").val(""):void 0}}(this)),this.forms.on("ajax:error",function(t){return function(e,n){var i,r,o,a,s;for(r="",s=$.parseJSON(n.responseText).errors,o=0,a=s.length;a>o;o++)i=s[o],r=r+"<span>"+i+"</span>";return t.notyError(r),$("#pass.active form").length>0?$("#pass.active form").find("input[type=password]").val(""):void 0}}(this)),this.localeSelect.select2({minimumResultsForSearch:99}),this.nicknameInput.blur(function(t){return function(){return $.post("/users/check_nickname.json",{nickname:t.nicknameInput.val()},function(e){return t.nicknameAvailability.text(e.msg)})}}(this)),0===this.initialSetup.length&&(this.clearQRcodeButton.on("ajax:beforeSend",function(t){return function(){return t.qrcodeLoader.show()}}(this)),this.clearQRcodeButton.on("ajax:complete",function(t){return function(){return t.qrcodeLoader.hide()}}(this)),this.clearQRcodeButton.on("ajax:success",function(t){return function(e){return e.stopPropagation(),t.qrcodeArea.html('<i class="fa fa-qrcode"></i>')}}(this)),this.qrcodeUpload.fileupload({url:"/users/upload_image",dataType:"json",maxFileSize:5e6,minFileSize:1,acceptFileTypes:/(\.|\/)(jpe?g|png)$/i,singleFileUploads:!0,add:function(t){return function(e,n){var i;return t.qrcodeLoader.show(),i=n.submit(),i.complete(function(){return t.qrcodeLoader.hide()}),i.success(function(e){var n,i,r,o,a;if($.isArray(e)){for(o=[],i=0,r=e.length;r>i;i++)n=e[i],o.push(noty({text:n,layout:"topCenter",type:"error",timeout:"3000",theme:"maleskineTheme"}));return o}return a=e.qrcode_url,0===t.qrcodeImage.length?(t.qrcodeArea.html("<img src='"+a+"' />"),t.refreshElements()):t.qrcodeImage.attr("src",a)}),i.error(function(t){var e,n,i,r,o;for(n=$.parseJSON(t.responseText),o=[],i=0,r=n.length;r>i;i++)e=n[i],o.push(noty({text:e,layout:"topCenter",type:"error",timeout:"3000",theme:"maleskineTheme"}));return o})}}(this)}),this.avatarSet.on("ajax:beforeSend",function(t){return function(){return t.avatarUploadLoader.show()}}(this)),this.avatarSet.on("ajax:complete",function(t){return function(){return t.avatarUploadLoader.hide()}}(this)),this.avatarSet.on("ajax:success",function(t){return function(e,n){return t.avatarImage.attr("src",n.avatar_url)}}(this)),this.avatarUpload.fileupload({url:Routes.user_avatar_path(Maleskine.currentUserId),dataType:"json",maxFileSize:5e6,minFileSize:1,acceptFileTypes:/(\.|\/)(gif|jpe?g|png)$/i,singleFileUploads:!0,add:function(t){return function(e,n){var i;return t.avatarUploadLoader.show(),i=n.submit(),i.complete(function(){return t.avatarUploadLoader.hide()}),i.success(function(e){var n,i,r,o,a;if($.isArray(e)){for(o=[],i=0,r=e.length;r>i;i++)n=e[i],o.push(noty({text:n,layout:"topCenter",type:"error",timeout:"3000",theme:"maleskineTheme"}));return o}return a=e.avatar_url,t.avatarImage.attr("src",a)}),i.error(function(e){var n;return n=$.parseJSON(e.responseText).errors,t.notyError(n[0])})}}(this)})),null!=$("ul.index-tab").sortable&&$("ul.index-tab").sortable({axis:"y"}).disableSelection()}return e(i,n),i.prototype.elements={".nav-tabs":"tab",".tab-content":"tabContent",form:"forms","div.avatar img":"avatarImage","div.micro-code img":"qrcodeImage","div.micro-code":"qrcodeArea",".qrcode-loader":"qrcodeLoader","#initial_setup":"initialSetup","#user_upload_avatar":"avatarUpload","#user_qrcode":"qrcodeUpload",".clear-qrcode":"clearQRcodeButton","#upload-loader":"avatarUploadLoader","a.set-avatar":"avatarSet","#user_locale":"localeSelect","#user_nickname":"nicknameInput",".nickname-availability":"nicknameAvailability","#settings-account":"accountForm",".submit-button":"submitButton","#sns table a[data-method=delete]":"removeSNSLinks",".sns-loader":"snsLoader","#pass input":"passwordInputs",".social-network":"sns",".email-confirmation":"sendEmailCheckButton","#user_email":"emailInput",".email-notice":"emailNotice",".email-loader":"emailLoader"},i.prototype.events={"click .refresh_captcha":"refreshCaptcha","click .reset-password-link":"submitResetPassword","click .verify-mobile":"openSmsBindModal"},i.prototype.submitResetPassword=function(t){return $.post(Routes.send_password_reset_path({format:"json"}),function(e){return function(n){return $(t.target).remove(),$("#pass").append("<p>"+n.message+"</p>"),e.notyInfo(n.message)}}(this)).fail(function(t){return function(e){return t.notyError($.parseJSON(e.responseText).message)}}(this))},i.prototype.refreshCaptcha=function(){return $.getJSON(Routes.refresh_captcha_path({format:"json"}),function(){return function(t){return $(".captcha_fields").html(JST.render("common/captcha",t))}}(this))},i.prototype.openSmsBindModal=function(){var t;return t=new Maleskine.SmsBindModal,t.open()},i}(Maleskine.BaseModule)}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;Maleskine.EmailCheck=function(n){function i(){this.isSendButtonEnabled=t(this.isSendButtonEnabled,this),this.enableSendButton=t(this.enableSendButton,this),this.disableSendButton=t(this.disableSendButton,this),i.__super__.constructor.apply(this,arguments),this.sendButton.click(function(t){return function(){var e;return t.isSendButtonEnabled()?(e=t.emailInput.val(),$.ajax({url:Routes.send_confirmation_email_path(),type:"post",data:{email:e},dataType:"json",beforeSend:function(){return t.emailLoader.show(),t.sendButton.data("blocked",1)
},success:function(e){var n;return t.emailNotice.fadeOut("fast"),n="<i class='fa fa-check'></i>"+e.message,t.emailNotice.html(n),t.emailNotice.fadeIn("fast"),t.countdown=59,t.sendButton.data("origin-text",t.sendButton.html()),t.sendButton.html("("+t.countdown+")"),t.disableSendButton(),t.intervalHandler=setInterval(function(){return t.countdown=t.countdown-1,0===t.countdown?(clearInterval(t.intervalHandler),t.sendButton.html(t.sendButton.data("origin-text")).removeData("origin-text"),t.enableSendButton()):(t.sendButton.html("("+t.countdown+")"),t.sendButton.data("blocked",1))},1e3)},error:function(e){var n,i;return i=JSON.parse(e.responseText).message,t.emailNotice.fadeOut("fast"),n="<i class='fa fa-info-circle'></i>"+i,t.emailNotice.html(n),t.emailNotice.fadeIn("fast")},complete:function(){return t.emailLoader.hide(),t.sendButton.removeData("blocked")}})):void 0}}(this))}return e(i,n),i.prototype.elements={".email-confirmation":"sendButton","#user_email":"emailInput",".email-notice":"emailNotice",".email-loader":"emailLoader"},i.prototype.disableSendButton=function(){return this.sendButton.data("blocked",1)},i.prototype.enableSendButton=function(){return this.sendButton.removeData("blocked")},i.prototype.isSendButtonEnabled=function(){return!(1===this.sendButton.data("blocked"))},i}(Maleskine.BaseModule)}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;Maleskine.SmsVerification=function(n){function i(){this.showSmsBindModal=t(this.showSmsBindModal,this),this.isSendButtonEnabled=t(this.isSendButtonEnabled,this),this.enableSendButton=t(this.enableSendButton,this),this.disableSendButton=t(this.disableSendButton,this),i.__super__.constructor.apply(this,arguments),this.smsBind=new Maleskine.SmsBindModal,this.sendButton.click(function(t){return function(){var e;return t.isSendButtonEnabled()?(e=t.mobileInput.val(),$.ajax({url:Routes.send_sms_verification_path(),type:"post",data:{mobile_number:e},dataType:"json",beforeSend:function(){return t.sendingLoader.show(),t.sendButton.data("blocked",1)},success:function(e){var n,i;return t.notice.fadeOut("fast"),n="<i class='fa fa-check'></i>"+e.message,t.notice.html(n),t.notice.fadeIn("fast"),t.countdown=59,t.sendButton.data("origin-text",t.sendButton.html()),t.sendButton.html("("+t.countdown+")"),t.disableSendButton(),t.tokenInput.val(""),i=t.tokenInput.parents(".input-append"),i.fadeIn("fast"),t.verifyButton.on("click",function(){return $.ajax({url:Routes.verify_sms_token_path(),type:"post",data:{mobile:t.mobileInput.val(),code:t.tokenInput.val()},dataType:"json",beforeSend:function(){return t.verifyingLoader.show()},success:function(){return i.fadeOut("fast"),t.mobileInput.addClass("disabled"),t.mobileInput.prop("disabled",!0),t.mobileInput.siblings("button").remove()},complete:function(e,i){var r,o;return"success"===i||"error"===i?(t.verifyingLoader.hide(),o=JSON.parse(e.responseText).message,t.notice.is(":visible")?t.notice.fadeOut("fast",function(){var e;return e="success"===i?"fa fa-check":"fa fa-info-circle",n="<i class='"+e+"'></i>"+o,t.notice.html(n),t.notice.fadeIn("fast")}):(r="success"===i?"fa fa-check":"fa fa-info-circle",n="<i class='"+r+"'></i>"+o,t.notice.html(n),t.notice.fadeIn("fast"))):void 0}})}),t.intervalHandler=setInterval(function(){return t.countdown=t.countdown-1,0===t.countdown?(clearInterval(t.intervalHandler),t.sendButton.html(t.sendButton.data("origin-text")).removeData("origin-text"),t.enableSendButton()):(t.sendButton.html("("+t.countdown+")"),t.sendButton.data("blocked",1))},1e3)},error:function(e){var n,i;return i=JSON.parse(e.responseText).message,t.notice.fadeOut("fast"),n="<i class='fa fa-info-circle'></i>"+i,t.notice.html(n),t.notice.fadeIn("fast")},complete:function(){return t.sendingLoader.hide(),t.sendButton.removeData("blocked")}})):void 0}}(this))}return e(i,n),i.prototype.elements={".send-sms-verification":"sendButton",".verify-sms-token":"verifyButton","#user_mobile_number":"mobileInput","#user_sms_verification_token":"tokenInput",".sms-verification-notice":"notice",".sms-sending-loader":"sendingLoader",".sms-verifying-loader":"verifyingLoader"},i.prototype.events={"click .verify-mobile":"showSmsBindModal"},i.prototype.disableSendButton=function(){return this.sendButton.data("blocked",1)},i.prototype.enableSendButton=function(){return this.sendButton.removeData("blocked")},i.prototype.isSendButtonEnabled=function(){return!(1===this.sendButton.data("blocked"))},i.prototype.showSmsBindModal=function(t){return this.smsBind.open(),t.stopPropagation(),t.preventDefault()},i}(Maleskine.BaseModule)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;Maleskine.SelfDestroy=function(e){function n(){n.__super__.constructor.apply(this,arguments),this.destroyButton.click(function(){return function(t){var e;return e=confirm(I18n.t("reading.self_destruction_confirm")),e?void 0:(t.preventDefault(),t.stopPropagation())}}(this)),this.destroyButton.on("ajax:error",function(t){return function(e,n){return t.notice.fadeOut("fast"),t.notice.text($.parseJSON(n.responseText).message),t.notice.fadeIn("fast")}}(this)),this.destroyButton.on("ajax:success",function(t){return function(){return t.notice.fadeOut("fast"),t.notice.text(I18n.t("reading.self_destroy_done")),t.notice.fadeIn("fast"),setTimeout(function(){return window.location="/"},3e3)}}(this))}return t(n,e),n.prototype.elements={"p.notice":"notice","a.delete":"destroyButton"},n}(Maleskine.BaseModule)}.call(this);